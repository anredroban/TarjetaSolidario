function validateManagementData(){$isValid=true;if($("#status").val()==""){alert("Debe escoger un estado");$isValid=false;return}else{if($("#substatus").val()==""){alert("Debe escoger un subestado");$isValid=false;return}else{if($("#recall").is(":visible")){if($("#recall").val()==""){alert("Debe ingresar una fecha para la rellamada");$isValid=false;return}else{if(calcularDias($("#recall").val())>3){alert("La fecha de rellamada no puede sobrepasar los tres días");$isValid=false;return}}}if($("#subSubStatus").is(":visible")){if($("#subSubStatus").val()==""){alert("Debe escoger un sub subestado");$isValid=false;return}}if($telefonoContactadoDiv.is(":visible")){if($telefonoContactado.val().trim()===""){alert("Ingrese el teléfono al cual pudo contactar al cliente");$isValid=false;return}else{if($telefonoContactado.val().substring(0,1)!=0){alert("El teléfono contactado es incorrecto");$isValid=false;return}else{if(!validarSiNumero($telefonoContactado.val())){alert("El teléfono contactado no es un número válido");$isValid=false;return}}}}}}if($managementData.is(":visible")){if($lugarEntrega.val()==""){alert("Seleccione un lugar de entrega");$isValid=false;return}if($fechaHoraEntrega.val().trim()==""){alert("Ingrese la fecha y hora de entrega de la tarjeta");$isValid=false;return}if($provinciaEntrega.val()==""){alert("Seleccione la provincia de entrega");$isValid=false;return}if($ciudadEntrega.val()==""){alert("Seleccione la ciudad de entrega");$isValid=false;return}if($parroquiaEntrega.val()==""){alert("Seleccione parroquia de entrega");$isValid=false;return}if($barrioEntrega.val()==""){alert("Seleccione el barrio de entrega");$isValid=false;return}if($divbarrioEspecifEntrega.is(":visible")){if($barrioNoDefinido.val()==""){alert("Especifique el barrio de entrega");$isValid=false;return}}if($callePrincipalEntrega.val()==""){alert("Especifique la calle principal de entrega");$isValid=false;return}if($numeracionEntrega.val().length>10){alert("Solo puede ingresar hasta 10 caracteres en el Campo Numeración Entrega");$isValid=false;return}if($calletransversalEntrega.val()==""){alert("Especifique la calle transversal de entrega");$isValid=false;return}if($referenciaEntrega.val()==""){alert("Especifique la referencia de entrega");$isValid=false;return}if($telefonoPrincipal.val()==""){alert("Debe ingresar el telefono principal");$isValid=false;return}else{if(!validarSiNumero($telefonoPrincipal.val().trim())){alert("El teléfono secundario debe contener sólo números");$isValid=false;return}else{if(!validarVacio($telefonoPrincipal.val())){alert("El campo teléfono secundario no debe contener espacios en blanco");$isValid=false;return}}}if($imputable.val()==""){alert("Campo imputable vacio");$isValid=false;return}else{if($divobservacionesImput.is(":visible")){if($observacionesImputable.val()==""){alert("Campo observaciones imputable vacio");$isValid=false;return}}}}return $isValid}function init(){esconderCamposEstados();$("#status").val($("#status option:first").val());$provinciaDomicilio.val($("#provinciaDomicilio option:first").val());$provinciaTrabajo.val($("#provinciaTrabajo option:first").val());$sucursal.val($("#sucursal option:first").val());$scriptContactado.hide();$scriptNoContactado.hide();$datosConyugue.hide();$emailDiv.hide();$divEstimado.hide();$telefonoContactadoDiv.hide();$divobservacionesImput.hide();$divbarrioEspecifEntrega.hide()}function checkIfNumberNoSpace(e,t){if(e==32)return 0;if($.inArray(e,[46,8,9,27,13,110,190])!==-1||e==97&&t.ctrlKey===true||e==99&&t.ctrlKey===true||e==120&&t.ctrlKey===true||e==0){return 1}if(e<48||e>57){return 0}}function emptySelect(e){var t=document.getElementById(e);var n=document.createElement("option");var r=t.length;while(r>0){r--;t.remove(r)}n.text="-- Seleccione --";n.value="";t.add(n,null)}function fillSelect(e,t){var n=document.getElementById(e);var r=t[0].length;emptySelect(e);if(r>0){for(i=0;i<r;i++){var s=document.createElement("option");s.text=t[1][i];s.value=t[0][i];n.add(s,null)}}return r}function esconderCamposEstados(){$("#recallDiv").hide();$("#subSubStatusDiv").hide();$managementData.hide()}function validarSiNumero(e){$esNumero=true;if(!/^([0-9])*$/.test(e)){$esNumero=false}return $esNumero}function soloLetras(e){key=e.keyCode||e.which;tecla=String.fromCharCode(key).toLowerCase();letras=" áéíóúabcdefghijklmnñopqrstuvwxyz";especiales="8-37-39-46";tecla_especial=false;for(var t in especiales){if(key==especiales[t]){tecla_especial=true;break}}if(letras.indexOf(tecla)==-1&&!tecla_especial){return false}}function validarEmail(e){var t=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;return t.test(e)?true:false}function validarPrimerCaracterEsCero(e){$esCero=true;var t=e.charAt(0);if(t!="0"){$esCero=false}return $esCero}function validarVacio(e){$esVacio=true;for(i=0;i<e.length;i++){if(e.charAt(i)==" "){$esVacio=false}}return $esVacio}function calcularDias(e){var t=new Date;var n=new Date(e);var r=n.getTime()-t.getTime();var i=Math.round(r/(1e3*60*60*24));return i}function esCedulaValida(e){$esValida=true;if(e.length!=10){$esValida=false}else{$region=parseInt(e.substring(0,2));if($region<=0||$region>24){$esValida=false}else{$ultimoDigito=e.substring(9,10);$pares=parseInt(e.substring(1,2))+parseInt(e.substring(3,4))+parseInt(e.substring(5,6))+parseInt(e.substring(7,8));$numero1=e.substring(0,1);$numero1=$numero1*2;if($numero1>9){$numero1=$numero1-9}$numero3=e.substring(2,3);$numero3=$numero3*2;if($numero3>9){$numero3=$numero3-9}$numero5=e.substring(4,5);$numero5=$numero5*2;if($numero5>9){$numero5=$numero5-9}$numero7=e.substring(6,7);$numero7=$numero7*2;if($numero7>9){$numero7=$numero7-9}$numero9=e.substring(8,9);$numero9=$numero9*2;if($numero9>9){$numero9=$numero9-9}$impares=$numero1+$numero3+$numero5+$numero7+$numero9;$suma_total=$pares+$impares;if($suma_total>=10)$primer_digito_suma=String($suma_total).substring(0,1);else $primer_digito_suma="0";$decena=(parseInt($primer_digito_suma)+1)*10;$digito_validador=$decena-$suma_total;if($digito_validador==10)$digito_validador=0;if($digito_validador!=$ultimoDigito){$esValida=false}}}return $esValida}function replaceMore2Spaces(e){var t=e;while(true){if(t.indexOf("  ")!=-1){t=t.replace(/\s{2,}/," ")}else{break}}return t.trim()}$(document).ready(function(){$managementData=$("#managementData");$lugarEntrega=$("#lugarEntrega");$horarioEntrega=$("#horarioEntrega");$fechaHoraEntrega=$("#fechaHoraEntrega");$nombreImpreso=$("#nombreImpreso");$cedulaVerificada=$("#cedulaVerificada");$nombreVerificado=$("#nombreVerificado");$provinciaEntrega=$("#provinciaEntrega");$ciudadEntrega=$("#ciudadEntrega");$parroquiaEntrega=$("#parroquiaEntrega");$barrioEntrega=$("#barrioEntrega");$callePrincipalEntrega=$("#callePrincipalEntrega");$numeracionEntrega=$("#numeracionEntrega");$calletransversalEntrega=$("#calletransversalEntrega");$referenciaEntrega=$("#referenciaEntrega");$provinciaDomicilio=$("#provinciaDomicilio");$ciudadDomicilio=$("#ciudadDomicilio");$sectorDomicilio=$("#sectorDomicilio");$callePrincipalDomicilio=$("#callePrincipalDomicilio");$numeracionDomicilio=$("#numeracionDomicilio");$calleTransversalDomicilio=$("#calleTransversalDomicilio");$referenciaDomicilio=$("#referenciaDomicilio");$tipoPredioDomicilio=$("#tipoPredioDomicilio");$provinciaTrabajo=$("#provinciaTrabajo");$ciudadTrabajo=$("#ciudadTrabajo");$sectorTrabajo=$("#sectorTrabajo");$callePrincipalTrabajo=$("#callePrincipalTrabajo");$numeracionTrabajo=$("#numeracionTrabajo");$calleTransversalTrabajo=$("#calleTransversalTrabajo");$referenciaTrabajo=$("#referenciaTrabajo");$tipoPredioTrabajo=$("#tipoPredioTrabajo");$telefonoCasa=$("#telefonoCasa");$prefijoCasa=$("#prefijoCasa");$telefonoTrabajo=$("#telefonoTrabajo");$prefijoTrabajo=$("#prefijoTrabajo");$telefonoPrincipal=$("#telefonoPrincipal");$telefonoSecundario=$("#telefonoSecundario");$celular=$("#celular");$sueldoIngresos=$("#sueldoIngresos");$gastosBasicos=$("#gastosBasicos");$observaciones=$("#observaciones");$send=$("#send");$scriptContactado=$("#scriptContactado");$scriptNoContactado=$("#scriptNoContactado");$datosConyugue=$("#datosConyugue");$identificacionConyuge=$("#identificacionConyuge");$apellido1Conyuge=$("#apellido1Conyuge");$apellido2Conyuge=$("#apellido2Conyuge");$nombre1Conyuge=$("#nombre1Conyuge");$nombre2Conyuge=$("#nombre2Conyuge");$nombreLaboraConyuge=$("#nombreLaboraConyuge");$lugarEntregaECuenta=$("#lugarEntregaECuenta");$emailDiv=$("#emailDiv");$seguroDesgravamen=$("#seguroDesgravamen");$sucursal=$("#sucursal");$oficina=$("#oficina");$tipoIdentificacion=$("#tipoIdentificacion");$cedula=$("#cedula");$apellidoPaterno=$("#apellidoPaterno");$apellidoMaterno=$("#apellidoMaterno");$primerNombre=$("#primerNombre");$segundoNombre=$("#segundoNombre");$estadoCivil=$("#estadoCivil");$genero=$("#genero");$nivelEstudios=$("#nivelEstudios");$profesion=$("#profesion");$cargasFamiliares=$("#cargasFamiliares");$barrioDomicilio=$("#barrioDomicilio");$valorVivienda=$("#valorVivienda");$email=$("#email");$origenIngresos=$("#origenIngresos");$nombreLabora=$("#nombreLabora");$fechaInicioTrabajoActual=$("#fechaInicioTrabajoActual");$cargo=$("#cargo");$barrioTrabajodiv=$("#barrioTrabajodiv");$lugarEntregaECuenta=$("#lugarEntregaECuenta");$rentas=$("#rentas");$remesas=$("#remesas");$ingresoFamiliares=$("#ingresoFamiliares");$otrosIngresos=$("#otrosIngresos");$serviciosBasicos=$("#serviciosBasicos");$transporte=$("#transporte");$otrosGastos=$("#otrosGastos");$activoBien=$("#activoBien");$valorUnitarioBien=$("#valorUnitarioBien");$saldoPasivo=$("#saldoPasivo");$apellido1RefPersonal=$("#apellido1RefPersonal");$apellido2RefPersonal=$("#apellido2RefPersonal");$nombre1RefPersonal=$("#nombre1RefPersonal");$nombre2RefPersonal=$("#nombre2RefPersonal");$telefonoRefPersonal=$("#telefonoRefPersonal");$celularRefPersonal=$("#celularRefPersonal");$parentescoRefPersonal=$("#parentescoRefPersonal");$telefonoRefPersonal2=$("#telefonoRefPersonal2");$celularRefPersonal2=$("#celularRefPersonal2");$parentescoRefPersonal2=$("#parentescoRefPersonal2");$tipoVivienda=$("#tipoVivienda");$divEstimado=$("#divEstimado");$telefonoContactado=$("#telefonoContactado");$telefonoContactadoDiv=$("#telefonoContactadoDiv");$telefonoCelularSMS=$("#telefonoCelularSMS");$imputable=$("#imputable");$observacionesImputable=$("#observacionesImputable");$divobservacionesImput=$("#divobservacionesImput");$divbarrioEspecifEntrega=$("#divbarrioEspecifEntrega");$barrioNoDefinido=$("#barrioNoDefinido");init();$("#status").change(function(){esconderCamposEstados();if($("#status").val()==""){emptySelect("substatus")}else{$statusId=this.value;$.get(baseUrl+"/FuncionesAjax/getSubStatusByStatus",{id:$statusId},function(e){fillSelect("substatus",e)})}if(this.value==1){$scriptContactado.show();$telefonoContactadoDiv.show()}else{$scriptContactado.hide();$telefonoContactadoDiv.hide()}});$("#substatus").change(function(){esconderCamposEstados();if($("#substatus").val()==""){emptySelect("subSubStatus")}else{$subStatusId=this.value;$.get(baseUrl+"/FuncionesAjax/getSubSubStatusBySubStatus",{id:$subStatusId},function(e){if(fillSelect("subSubStatus",e)>0){$("#subSubStatusDiv").show()}else{$("#subSubStatusDiv").hide()}if(e[0]=="Venta"){}else{}if($("#substatus").val()==5){$scriptNoContactado.show();$scriptContactado.hide()}else{$scriptNoContactado.hide();$scriptContactado.show()}})}});$("#subSubStatus").change(function(){if($("#subSubStatus option:selected").text().indexOf("ADICIONAL")>=0){}else{}if($("#substatus").val()==1){if($("#subSubStatus").val()==53){$("#managementData").show()}else{$("#managementData").hide()}}if($("#substatus").val()==5){if($("#subSubStatus").val()==30){$("#recallDiv").show()}else{$("#recallDiv").hide()}}});$provinciaDomicilio.change(function(){if($provinciaDomicilio.val()==""){emptySelect("ciudadDomicilio");emptySelect("sectorDomicilio");$prefijoCasa.html("")}else{$prefijoCasa.html("("+this.value.split("-")[1]+")");$id=this.value.split("-")[0];$.get(baseUrl+"/FuncionesAjax/getCiudades",{id:$id},function(e){fillSelect("ciudadDomicilio",e)})}});$ciudadDomicilio.change(function(){if($ciudadDomicilio.val()==""){emptySelect("sectorDomicilio")}else{$id=this.value;$.get(baseUrl+"/FuncionesAjax/getParroquias",{id:$id},function(e){fillSelect("sectorDomicilio",e)})}});$sectorDomicilio.change(function(){if($sectorDomicilio.val()==""){emptySelect("barrioDomicilio")}else{$id=this.value;$.get(baseUrl+"/FuncionesAjax/getBarrios",{id:$id},function(e){fillSelect("barrioDomicilio",e)})}});$provinciaTrabajo.change(function(){if($provinciaTrabajo.val()==""){emptySelect("ciudadTrabajo");emptySelect("sectorTrabajo");$prefijoTrabajo.html("")}else{$prefijoTrabajo.html("("+this.value.split("-")[1]+")");$id=this.value.split("-")[0];$.get(baseUrl+"/FuncionesAjax/getCiudades",{id:$id},function(e){fillSelect("ciudadTrabajo",e)})}});$ciudadTrabajo.change(function(){if($ciudadTrabajo.val()==""){emptySelect("sectorTrabajo")}else{$id=this.value;$.get(baseUrl+"/FuncionesAjax/getParroquias",{id:$id},function(e){fillSelect("sectorTrabajo",e)})}});$sectorTrabajo.change(function(){if($sectorTrabajo.val()==""){emptySelect("barrioTrabajodiv")}else{$id=this.value;$.get(baseUrl+"/FuncionesAjax/getBarrios",{id:$id},function(e){fillSelect("barrioTrabajodiv",e)})}});$provinciaEntrega.change(function(){if($provinciaEntrega.val()==""){emptySelect("ciudadEntrega");emptySelect("parroquiaEntrega");$prefijoCasa.html("")}else{$prefijoCasa.html("("+this.value.split("-")[1]+")");$id=this.value.split("-")[0];$.get(baseUrl+"/FuncionesAjax/getCiudades",{id:$id},function(e){fillSelect("ciudadEntrega",e)})}});$ciudadEntrega.change(function(){if($ciudadEntrega.val()==""){emptySelect("parroquiaEntrega")}else{$id=this.value;$.get(baseUrl+"/FuncionesAjax/getParroquias",{id:$id},function(e){fillSelect("parroquiaEntrega",e)})}});$parroquiaEntrega.change(function(){if($parroquiaEntrega.val()==""){emptySelect("barrioEntrega")}else{$id=this.value;$.get(baseUrl+"/FuncionesAjax/getBarrios",{id:$id},function(e){fillSelect("barrioEntrega",e)})}});$sucursal.change(function(){if($sucursal.val()==""){emptySelect("oficina")}else{$id=this.value;$.get(baseUrl+"/funcionesAjax/getOficinas",{id:$id},function(e){fillSelect("oficina",e)})}});$estadoCivil.change(function(){if($estadoCivil.val()=="CASADO"){$datosConyugue.show()}else{$datosConyugue.hide()}});$lugarEntregaECuenta.change(function(){if($lugarEntregaECuenta.val()=="DIGITAL"){$emailDiv.show()}else{$emailDiv.hide()}});$tipoVivienda.change(function(){if($tipoVivienda.val()=="PROPIA HIPOTECADA"||$tipoVivienda.val()=="PROPIA NO HIPOTECADA"){$divEstimado.show()}else{$divEstimado.hide()}});$imputable.change(function(){if($imputable.val()=="CALL CENTER"||$imputable.val()=="COURIER"){$divobservacionesImput.show()}else{$divobservacionesImput.hide()}});$barrioEntrega.change(function(){if($("#barrioEntrega option:selected").text()=="BARRIO NO DEFINIDO"||$("#barrioEntrega option:selected").text()=="BARRIOS NO DEFINIDOS"){$divbarrioEspecifEntrega.show()}else{$divbarrioEspecifEntrega.hide()}});$("#send").click(function(e){if(!validateManagementData()){e.preventDefault();return false}})});$("#referenciaEntrega").keydown(function(e){if(e.keyCode==13){return false}else{return}});$("#referenciaTrabajo").keydown(function(e){if(e.keyCode==13){return false}else{return}});$("#telefonoCelularSMS").keydown(function(e){if(e.keyCode==32){return false}else{return}});$("#telefonoCelularSMS").on("keypress",function(e){if(checkIfNumberNoSpace(e.which,e)==0){return false}else{return}})